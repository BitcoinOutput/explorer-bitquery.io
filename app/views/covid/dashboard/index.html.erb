<h1>COVID-19 World Global Data</h1>
<div class="row">
  <div class="col-lg-12 mb-12">
    <div class="card">
      <div class="card-header">Count of new cases, daily</div>
      <div class="card-body">
        <div id="daily"><%= t('loading') %></div>
      </div>
    </div>
  </div>
</div>


<script>

    var daily_query = new widgets.query(`
    query {
       covid {
              facts(options: {asc: "date.fulldate"}){

              date {
                date(format: "%d/%m")
                fulldate: date
              }

            confirmed
            recovered
            deaths
       }

    }

  }`);

    var tbtbnb = new widgets.chart('#daily', daily_query, 'covid.facts', {
        title: 'Daily stats',
        chartOptions: {
            vAxes: {
                '0': {
                    title: 'Case Count'
                }
            },
            hAxis: {
                title: '<%= t('widgets.titles.date') %>'
            },
            isStacked: false, bar: {groupWidth: "95%"},
        },
        dataOptions: [
            {
                title: '<%= t('widgets.titles.date') %>',
                path: 'date.date'
            },
            {
                title: 'Confirmed cases',
                path: 'confirmed'
            },
            {
                title: 'Recovered cases',
                path: 'recovered'
            },
            {
                title: 'Death cases',
                path: 'deaths'
            }
        ]
    });

    daily_query.request();

</script>
